<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords"
          content="场景大师,场景,VR场景,惟锐,惟锐科技,VR,虚拟现实,虚拟样板间,虚拟空间,数字精装,数字实验室,工业仿真,惟锐（杭州）数字科技有限公司,数字地产,虚拟场景,场景内容提供,场景交互">
    <meta name="description"
          content="场景大师，惟锐科技，泛家居产业最大的VR场景展示交互平台，拥有VR产业最大场景制作团队，虚拟现实场景时代内容提供商，专注于虚拟现实技术研发及视觉表现，拥有国内首条的虚拟现实生产线，可以快速为客户生产不同需求的场景展示空间，业务范围涉及城市建筑、城市规划、室内样板房、园林景观、数字实验室等相关领域">
    <title>版本日志</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/head.css">
    <link rel="stylesheet" href="css/version.css">

</head>
<body>
<div id="page-header">

</div>
<div id="page-content">
    <div id="app-title">
        <p style="margin-left:80px;">场景大师</p>
    </div>
    <div id="time-box">
        <div class="cirqueB" style="top:0"></div>
        <div class="time-line" style="height:74px;"></div>
        <div class="cirqueB" style="bottom:0"></div>
    </div>
        <!--<div class="time-line"></div>-->
        <!--<div class="cirqueB" style="top:0"></div>-->
        <!--<div class="cirqueB" style="bottom:0"></div>-->

        <!--<div class="cirqueS" style="top:84px"></div>-->
        <!--<div class="cirqueS" style="top:310px"></div>-->
        <!--<div class="cirqueS" style="top:536px"></div>-->
    <!--</div>-->
    <!--<div class="bubbleFirst"></div>-->
    <!--&lt;!&ndash; 234+(204+20)*i &ndash;&gt;-->
    <!--<div class="bubbleRight" style="top:458px;"></div>-->
    <!--<div class="bubbleLeft" style="top:682px;"></div>-->
</div>

<script src="http://apps.bdimg.com/libs/jquery/1.11.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery_1_11_3.min.js"><\/script>')</script>
<script src="js/head.js"></script>
<script>

    var verList = [{"ver":"V0.2.6", "pub_date":"2016.04.18", "exter_desc": "场景大师公测"},
        {"ver":"V0.3.0", "pub_date":"2016.05.04", "exter_desc": "V0.3.0\r\n新增客服联系功能\r\n可查看商品详情\r\n新增品牌场景\r\n方案可保存\r\n修复若干bug"},
        {"ver":"V0.3.1", "pub_date":"2016.05.12", "exter_desc": "V0.3.1\r\n优化了生成全景图的功能\r\n优化了添加模型的操作\r\n瓷砖应用时现实分缝\r\n增加了客服电话\r\n优化了主页面操作提示UI\r\n修复若干bug"},
        {"ver":"V1.0.0", "pub_date":"2016.06.01", "exter_desc": "V1.0.0\r\n新增帮助中心内容\r\n优化材质应用尺寸\r\n优化材质应用的显示效果\r\n优化拍照、全景图生成时的提示\r\n场景详情界面的优化\r\n地毯类素材的优化\r\n启动场景时添加启动页"},
        {"ver":"V1.0.1", "pub_date":"2016.06.12", "exter_desc": "V1.0.1\r\n优化了注册角色的名称\r\n修复了场景下载暂停后进度回退的问题\r\n修复了地毯模型与坐标轴分离的问题"},
        {"ver":"V1.0.2", "pub_date":"2016.06.21", "exter_desc": "V1.0.2\r\n新增了下载场景的限制\r\n新增贴图上传限制\r\n新增单点登录功能\r\n编辑器界面新增广告功能"},
        {"ver":"R1.0.3", "pub_date":"2016.06.30", "exter_desc": "R1.0.3\r\n优化了360全景图的生成速度\r\n可修改昵称\r\n修复了部分bug"},
        {"ver":"R1.0.4", "pub_date":"2016.07.11", "exter_desc": "R1.0.4\r\n同一账号在其他电脑登录会顶掉此账号\r\n新增上传素材可填写真实尺寸\r\n修复了部分bug"},
        {"ver":"R1.1.0", "pub_date":"2016.07.18", "exter_desc": "R1.1.0\r\n新增场景积分系统\r\n编辑器优化了界面展示与操作逻辑\r\n编辑器新增清除场景颜色的功能"},
        {"ver":"R1.1.1", "pub_date":"2016.07.19", "exter_desc": "R1.1.1\r\n优化了场景积分系统\r\n修复了360全景图的功能"}
    ];
    window.onload = function(){
        document.getElementById('download').setAttribute('class', 'active');
    };
    $(function(){
        getData();
        //processData(verList);
    });
    !function () {
        window.onscroll = function () {
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            var header = document.getElementById('page-header');
            if (scrollTop >= 10) {
                header.className = 'fixing';
            } else {
                header.className = '';
            }
        }
    }();

    function getData(){
        $.ajax( {
            type:'GET',
            url: 'http://vr.duc.cn/pub/api/recent/list?callback=?',
            dataType: 'jsonp',
            jsonp: "callback",
            success: function(json) {
                Array.prototype.push.apply(verList, json);
                processData(verList);

            }
        });
    }
    function processData(list) {
        console.log(list[list.length-1]);
        var totalHeight = 0;
        var thisHeight = 0;
        for (var i = list.length - 1; i >= 0; i--) {
            var desc = list[i].exter_desc.toString().split('\r\n');
            var date = list[i].pub_date.replace(/-/g,'.');
            var version = desc[0];
            desc.shift();
            if (i == list.length - 1) {
                thisHeight = 60+30+10+desc.length*30;
                $('#page-content').append('<div class="boxFirst" style="top:'
                        +234
                        +'px"><div class="bubbleFirst">'
                        +'<div class="versionCode"><span>'
                        +version
                        +'</span><span style="margin-left:15px;font-size:12px;">'
                        +date
                        +'</span></div><div class="versionLog" id="log_'
                        +i
                        +'"></div></div></div>');
                for(var j=0; j<desc.length; j++){
                    $('#log_'+i).append('<p>'+(j+1)+'. '+desc[j]+'</p>');
                }
                $('#time-box').append('<div class="time-line" style="height:'
                        +(thisHeight)
                        +'px;"></div><div class="cirqueS" style="top:84px">');
                totalHeight = totalHeight + thisHeight;
            } else {
                //右侧
                if((list.length-i)%2==0){
                    thisHeight = 60+30+10+desc.length*30;
                    $('#page-content').append('<div class="boxRight" style="top:'
                            +(234+totalHeight)
                            +'px"><div class="bubbleRight">'
                            +'<div class="versionCode"><span>'
                            +version
                            +'</span><span style="margin-left:15px;font-size:12px;">'
                            +date
                            +'</span></div><div class="versionLog" id="log_'
                            +i
                            +'"></div></div></div>');
                    for(var j=0; j<desc.length; j++){
                        $('#log_'+i).append('<p>'+(j+1)+'. '+desc[j]+'</p>');
                    }

                    $('#time-box').append('<div class="time-line" style="height:'
                            +(thisHeight)
                            +'px;"></div><div class="cirqueS" style="top:'
                            +(84+totalHeight)
                            +'px">');
                    totalHeight = totalHeight + thisHeight;
                }
                //左侧
                else {
                    thisHeight = 60+30+10+desc.length*30;
                    $('#page-content').append('<div class="boxLeft" style="top:'
                            +(234+totalHeight)
                            +'px"><div class="bubbleLeft">'
                            +'<div class="versionCode"><span>'
                            +version
                            +'</span><span style="margin-left:15px;font-size:12px;">'
                            +date
                            +'</span></div><div class="versionLog" id="log_'
                            +i
                            +'"></div></div></div>');
                    for(var j=0; j<desc.length; j++){
                        $('#log_'+i).append('<p>'+(j+1)+'. '+desc[j]+'</p>');
                    }

                    $('#time-box').append('<div class="time-line" style="height:'
                            +(thisHeight)
                            +'px;"></div><div class="cirqueS" style="top:'
                            +(84+totalHeight)
                            +'px">');
                    totalHeight = totalHeight + thisHeight;
                }
            }
        }
    }

</script>
</body>
</html>