<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords"
          content="场景大师,场景,VR场景,惟锐,惟锐科技,VR,虚拟现实,虚拟样板间,虚拟空间,数字精装,数字实验室,工业仿真,惟锐（杭州）数字科技有限公司,数字地产,虚拟场景,场景内容提供,场景交互">
    <meta name="description"
          content="场景大师，惟锐科技，泛家居产业最大的VR场景展示交互平台，拥有VR产业最大场景制作团队，虚拟现实场景时代内容提供商，专注于虚拟现实技术研发及视觉表现，拥有国内首条的虚拟现实生产线，可以快速为客户生产不同需求的场景展示空间，业务范围涉及城市建筑、城市规划、室内样板房、园林景观、数字实验室等相关领域">
    <title>场景大师下载</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/head.css">
    <link rel="stylesheet" href="css/download.css">
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?624278f2a2f309764229485d2ff0c0f4";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();

    </script>
</head>

<body>
<div id="page-header">

</div>

<!--<div id="sub-banner">-->
    <!--<div class="wrapper">-->
        <!--<span class="sub-option">下载</span>-->
        <!--<span class="sub-option">版本日志</span>-->

    <!--</div>-->

<!--</div>-->

<div id="page-content">
    <div id="scene-panel">

        <div class="scene-0">
            <img src="img/download/logo-icon.png" alt="logo">
            <h1>场景大师</h1>
            <h2>所见即所得&emsp;沟通更简单</h2>
        </div>
        <div class="scene-1">
            <img src="img/download/logo-icon.png" alt="logo">

            <p>
                <span>配置要求</span><br>
                运行环境：&emsp;win7/win8/win10<br>
                处&nbsp;理&nbsp;器 ：&emsp;Intel或AMD，4核CPU<br>
                内&emsp;&emsp;存：&emsp;8G以上<br>
                显&emsp;&emsp;卡：&emsp;GT740或者HD5770以上
            </p>
        </div>
        <div class="scene-2">
            <img src="img/download/logo-icon.png" alt="logo">
            <h1>版本更新内容</h1>
            <p id="ver_content">

            </p>
        </div>
    </div>
    <ul id="slider-bar">
        <li data-index="0" class="active"><i></i></li>
        <li data-index="1"><i></i></li>
        <li data-index="2"><i></i></li>
    </ul>
    <button>立即下载</button>
    <div class="client-info">
        <span id="ver_num" class="version"></span>
        <span id="ver_date" class="time"></span>
    </div>
</div>

<div class="sky"></div>
<div class="cloud1"></div>
<div class="plane">
    <div class="propeller"></div>
</div>
<div class="cloud2"></div>
<iframe src="" id="fake" style="display: none;"></iframe>
<!--<script src="//apps.bdimg.com/libs/jquery/1.11.3/jquery.min.js"></script>-->
<!--<script>window.jQuery || document.write('<script src="js/jquery_1_11_3.min.js"><\/script>')</script>-->
<!--<script src="//libs.useso.com/js/jquery-easing/1.3/jquery.easing.min.js"></script>-->
<!--<script>$.easing.easeInOutQuad || document.write('<script src="js/jquery.easing_1_3.min.js"><\/script>')</script>-->
<script src="js/jquery_1_11_3.min.js"></script>
<script src="js/jquery.easing_1_3.min.js"></script>
<script>

    //headerEle.style.paddingRight = scrollBarWidth + 'px';
</script>
<script src="js/head.js"></script>
<script>
    /**
     * 获取滚动条宽度
     * @returns {number}
     */
    function getScrollBarWidth() {
        var oP = document.createElement('p');
        oP.style.width = '100px';
        oP.style.height = '100px';
        oP.style.overflowY = 'scroll';
        document.body.appendChild(oP);
        var scrollBarWidth = oP.offsetWidth - oP.clientWidth;
        oP.parentNode.removeChild(oP);  // 删除节点（兼容IE8）
        return scrollBarWidth;
    }
    // 模拟滚动条宽度

    $(function () {
        var scrollBarWidth = getScrollBarWidth();
        $("#register-btn").css('margin-right', scrollBarWidth-3+"px");

        getData();
        document.getElementById('download').setAttribute('class', 'active');
        var $sliderBar = $('#slider-bar');
        var $liList = $sliderBar.find('li');
        var liWidth = 44;
        var currentIndex = 0;
        $liList.eq(currentIndex).children('i').css({'left': '0px'});


        var autoSlider = window.setInterval(function () {
            slideTo(currentIndex + 1);
        }, 5000);

        $liList.click(function () {
            var targetLiIndex = $(this).data('index');

            window.clearInterval(autoSlider);
            autoSlider = window.setInterval(function () {
                slideTo(currentIndex + 1);
            }, 5000);

            slideTo(targetLiIndex);
        });

        $(document.body).on("mousewheel DOMMouseScroll", function (e) {
            var delta = (e.originalEvent.wheelDelta && (e.originalEvent.wheelDelta > 0 ? 1 : -1)) ||  // chrome & ie
                    (e.originalEvent.detail && (e.originalEvent.detail > 0 ? -1 : 1));  // firefox

            window.clearInterval(autoSlider);
            autoSlider = window.setInterval(function () {
                slideTo(currentIndex + 1);
            }, 5000);
            delta > 0 ? slideTo(currentIndex - 1) : slideTo(currentIndex + 1);
        });

        var ok = true;

        function slideTo(targetIndex) {
            if (!ok) return;
            targetIndex = targetIndex < 0 ? 2 : targetIndex > 2 ? 0 : targetIndex;
            if (targetIndex > currentIndex) {
                $('.scene-' + targetIndex).css({'left': '100%'}).animate({'left': '0%'}, 'fast');
                $('.scene-' + currentIndex).animate({'left': '-100%'}, 'fast');
                $liList.eq(targetIndex).children('i').css({'left': -liWidth + 'px'}).animate({'left': '0px'}, 'fast');
                $liList.eq(currentIndex).children('i').animate({'left': liWidth + 'px'}, 'fast');
            } else if (targetIndex < currentIndex) {
                $('.scene-' + targetIndex).css({'left': '-100%'}).animate({'left': '0%'}, 'fast');
                $('.scene-' + currentIndex).animate({'left': '100%'}, 'fast');
                $liList.eq(targetIndex).children('i').css({'left': liWidth + 'px'}).animate({'left': '0px'}, 'fast');
                $liList.eq(currentIndex).children('i').animate({'left': -liWidth + 'px'}, 'fast');
            } else {
                return false;
            }
            currentIndex = targetIndex;
            ok = false;
            window.setTimeout(function () {
                ok = true;
            }, 500);
        }

        var $sky = $('.sky');
        var $plane = $('.plane');
        var $propeller = $('.plane .propeller');
        // 螺旋桨
        var propellerX = 0;
        window.setInterval(function () {
            propellerX -= 40;
            $propeller.css({'background-position': propellerX + 'px 0px'});
        }, 50);

        planeFly();
        var upping = true;

        function planeFly() {
            $plane.animate({
                'bottom': upping ? '10%' : '3%'
            }, 2000, 'easeInOutQuad', function () {
                upping = !upping;
                planeFly();
            });
        }

        // 云层
        var skyX = 0;
        window.setInterval(function () {
            skyX += 2;
            $sky.css({'background-position': skyX + 'px 100%'});
        }, 50);

        $('button').click(function () {
            $('#fake').attr('src', 'http://vr.duc.cn/static/publish/Install/CTdashi_Setup.exe');
        });

    });
    function getData(){
        $.ajax( {
            type:'GET',
            url: 'http://vr.duc.cn/pub/api/recent/list?callback=?',
            dataType: 'jsonp',
            jsonp: "callback",
            success: function(json) {
                $('#ver_content').empty();
                var content = json[json.length-1].exter_desc.split('\r\n');
                for(var i=1; i<content.length; i++){
                    $('#ver_content').append(i+"."+content[i]+'<br/>');
                }
                $('#ver_num').empty();
                $('#ver_num').append('版本：'+content[0]);
                $('#ver_date').empty();
                $('#ver_date').append('更新：'+json[json.length-1].pub_date);
            }
        });
    }
</script>
</body>
</html>